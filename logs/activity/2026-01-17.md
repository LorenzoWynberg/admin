# Activity Log - 2026-01-17

### 18:30 - chore: consolidate migrations for greenfield

- Merged exchange rate fields into `create_currencies_table` migration
- Merged `description`, `distance_km`, `estimated_minutes` into `create_orders_table` migration
- Refactored `create_pricing_tables` with `status` enum instead of `is_active` + `currency_code`
- Updated `create_quotes_table` with `pricing_rule_id`, removed `currency_code`
- Renamed pricing_tables migration (2025_10_27_193000) to run before quotes
- Deleted 5 obsolete incremental/refactoring migrations
- Verified with `migrate:fresh --seed` - all passes

### 17:00 - feat: implement Currency Settings UI (Phase 3 of exchange rate plan)

- Created currency hooks (useCurrencyList, useCurrencyMutations)
- Created exchange rate hooks (useExchangeRateList, useSyncExchangeRates)
- Created Currency Settings page at `/settings/currencies`
  - Lists all currencies with enable/disable toggles
  - Shows base currency with visual indicator
  - Displays current exchange rates and rate sources
  - "Sync Rates Now" button to trigger rate sync
  - Edit dialog for rounding mode and increment per currency
  - Set Base Currency confirmation dialog
- Updated Settings page with navigation to Currency Settings
- Updated pricing rules to use `status` enum (DRAFT, ACTIVE, ARCHIVED) instead of `isActive` boolean
- Removed `currencyCode` from pricing rules (all rules now in base currency)
- Updated quotes and CreateQuoteDialog to remove currency selection
- Added `types/generated.d.ts` and `coverage/**` to eslint ignores

### 15:30 - fix: pricing detail page badge alignment

- Moved Active/Inactive badge from title row to subtitle row
- Badge now displays inline with "CRC - v1" for cleaner layout
