# Activity Log - 2026-01-18

### 09:15 - fix: correct api types path in CLAUDE.md

- Changed `cp ../api/types/generated.d.ts` to `cp ../api/resources/types/generated.d.ts`
- The generated types file is at `api/resources/types/generated.d.ts`, not `api/types/`

### 08:50 - refactor: extract status label helpers to lang.ts

- Added `statusLabel(status, modelKey?)` - base helper for any status with optional model interpolation
- Added `orderStatusLabel(status)` - convenience helper that auto-uses correct model key for estimated (quote) and assigned (driver)
- Simplified `OrderStatusBadge.tsx` to use `orderStatusLabel(status)` helper
- Removed inline translation logic from component

### 13:30 - refactor: centralize status translations to statuses namespace

- Created `statuses.php` in all languages (en/es/fr) with flat namespace structure
- Migrated status entries from orders.php, quotes.php, pricing.php
- Status keys: all, pending, estimated, approved, denied, canceled, assigned, picking_up, in_transit, completed, delivery_failed, unknown, draft, sent, accepted, rejected, expired, finalized, active, inactive, archived
- Used `:Model` interpolation for dynamic statuses (estimated → "Quote Ready", assigned → "Driver Assigned")
- Updated admin components:
  - `OrderStatusBadge.tsx` - uses `statuses:*` with Model interpolation
  - `QuoteStatusBadge.tsx` - uses `statuses:*` namespace
- Updated admin pages:
  - `orders/page.tsx` - statusOptions using statuses namespace
  - `quotes/page.tsx` - statusOptions using statuses namespace
  - `pricing/page.tsx` - filter and badges using statuses namespace
  - `pricing/[id]/page.tsx` - badges using statuses namespace
- Added `statuses` namespace to i18next config (admin and front-end)
- Regenerated i18n JSON files

### 11:45 - refactor: change validationAttribute default toUpper to true

- Changed default `toUpper` parameter from `false` to `true` in both admin and front-end
- Admin `utils/lang.ts`:
  - `validationAttribute(key, toUpper = true)` - default now capitalizes
  - Added explicit `false` in `validationMessage()` for mid-sentence usage
- Front-end `utils/lang.ts`:
  - `validationAttribute(key, toUpper = true)` - default now capitalizes
  - `validationAttributeWithPlurals(key, toUpper = true, count)` - default now capitalizes
  - Added explicit `false` in `validationMessage()` for mid-sentence usage
- Updated usages needing lowercase to pass explicit `false`:
  - `validation/auth/updatePasswordSchema.ts` - `other: validationAttribute('currentPassword', false)`
  - `screens/ChangePassword.tsx` - `resource: validationAttribute('password', false)`
- Pattern: Most usages are UI labels (capitalized), validation messages are mid-sentence (lowercase)

### 11:15 - fix: lowercase validation attributes and add toUpper param

- Fixed validation attributes in API lang files to be lowercase (singular form)
  - `api/lang/en/validation.php` - 50+ attributes changed from Title Case to lowercase
  - `api/lang/es/validation.php` - 50+ attributes changed to lowercase
- Updated all admin pages to use `toUpper` parameter when capitalization is needed
  - Table headers: `validationAttribute('name', true)`
  - Form labels: `validationAttribute('name', true)`
  - Card titles: `validationAttribute('name', true)`
  - Field labels in detail views: `validationAttribute('name', true)`
- Regenerated i18n JSON files from API
- Pattern: Use lowercase attributes with `toUpper=true` for UI labels

### 10:30 - refactor: update admin pages to use validationAttribute helper

- Updated all admin pages to use `validationAttribute()` and `resourceMessage()` helpers instead of namespace-specific translation keys
- Files updated:
  - `pricing/page.tsx` - table headers, error message
  - `pricing/[id]/page.tsx` - field labels, error message
  - `pricing/create/page.tsx` - form labels
  - `pricing/[id]/edit/page.tsx` - form labels, error message
  - `catalogs/page.tsx` - table headers, error message
  - `catalogs/[id]/page.tsx` - field labels, error message
  - `drivers/page.tsx` - table headers, error message
  - `drivers/[id]/page.tsx` - field labels, error message
  - `businesses/page.tsx` - table headers, error message
  - `businesses/[id]/page.tsx` - field labels, error message
  - `users/page.tsx` - error message
  - `users/[id]/page.tsx` - field labels, error message
  - `quotes/page.tsx` - error message
  - `quotes/[id]/page.tsx` - field labels, error message
  - `addresses/page.tsx` - table headers, error message
  - `orders/page.tsx` - error message
  - `orders/[id]/page.tsx` - field labels, error message
- Pattern: `t('namespace:field', { defaultValue })` → `validationAttribute('field')`
- Pattern: `t('namespace:failed_to_load', ...)` → `resourceMessage('failed_to_load', 'model_key', count)`
- All translations now consistently use validation.attributes namespace for field names
