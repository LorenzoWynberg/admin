openapi: 3.1.0
info:
  title: Mandados API
  description: Delivery management platform API
  version: 1.0.0
  contact:
    name: Mandados Support

servers:
  - url: http://api.mandados.test:60
    description: Local development
  - url: https://api.mandados.cr
    description: Production

tags:
  - name: Auth
    description: Authentication endpoints
  - name: Users
    description: User management
  - name: Orders
    description: Order management
  - name: Quotes
    description: Quote management
  - name: Addresses
    description: Address management
  - name: Geolocation
    description: Google Maps integration
  - name: Businesses
    description: Business management
  - name: Drivers
    description: Driver management
  - name: Catalogs
    description: Reference data catalogs

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    # Base Response
    SuccessBasic:
      type: object
      properties:
        message:
          type: string
        status:
          type: integer
        extra:
          type: object
          additionalProperties: true

    # Pagination Meta
    PaginationMeta:
      type: object
      properties:
        total:
          type: integer
        currentPage:
          type: integer
        lastPage:
          type: integer
        perPage:
          type: integer
        from:
          type: integer
        to:
          type: integer
        links:
          type: array
          items:
            type: object
            properties:
              url:
                type: string
                nullable: true
              label:
                type: string
              active:
                type: boolean

    # Error Response
    ErrorResponse:
      type: object
      properties:
        message:
          type: string
        status:
          type: integer
        details:
          type: string
          nullable: true
        errors:
          type: object
          additionalProperties:
            type: array
            items:
              type: string
        extra:
          type: object

    # User
    UserData:
      type: object
      properties:
        id:
          type: integer
        role:
          type: string
          enum: [admin, driver, client, business.owner, business.user]
        name:
          type: string
        email:
          type: string
          format: email
        phone:
          type: string
        avatar:
          type: string
          format: uri
        langCode:
          type: string
          maxLength: 2
        businessId:
          type: integer
          nullable: true
        sexName:
          type: string
        isAdmin:
          type: boolean
        isBusinessAccount:
          type: boolean
        isBusinessOwner:
          type: boolean
        isBusinessUser:
          type: boolean
        isDriver:
          type: boolean
        isClient:
          type: boolean
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        dateOfBirth:
          type: string
          format: date
        emailVerifiedAt:
          type: string
          format: date-time
          nullable: true

    # Address
    AddressData:
      type: object
      properties:
        id:
          type: integer
        label:
          type: string
        type:
          type: string
          enum: [Saved, Snapshot]
        isPrimary:
          type: boolean
        isPhysical:
          type: boolean
        streetAddress:
          type: string
        premise:
          type: string
          nullable: true
        additionalInfo:
          type: string
          nullable: true
        latitude:
          type: number
          format: double
        longitude:
          type: number
          format: double
        globalCode:
          type: string
          nullable: true
        compoundCode:
          type: string
          nullable: true
        placeId:
          type: string
          nullable: true
        country:
          $ref: '#/components/schemas/LocationData'
        state:
          $ref: '#/components/schemas/LocationData'
        city:
          $ref: '#/components/schemas/LocationData'
        district:
          $ref: '#/components/schemas/LocationData'

    LocationData:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        code:
          type: string

    # Order
    OrderData:
      type: object
      properties:
        id:
          type: integer
        userId:
          type: integer
        businessId:
          type: integer
          nullable: true
        driverId:
          type: integer
          nullable: true
        fromName:
          type: string
        fromPhone:
          type: string
        fromAddress:
          $ref: '#/components/schemas/AddressData'
        toName:
          type: string
        toPhone:
          type: string
        toAddress:
          $ref: '#/components/schemas/AddressData'
        description:
          type: string
          nullable: true
        status:
          type: string
          enum:
            [
              pending,
              estimated,
              approved,
              denied,
              assigned,
              picking_up,
              arrived_at_pickup,
              picked_up,
              in_transit,
              arrived_at_drop_off,
              waiting_confirmation,
              completed,
              delivery_failed,
              returned_to_sender,
              canceled,
            ]
        paymentStatus:
          type: string
          enum: [unpaid, paid, refunded, disputed]
        currencyCode:
          type: string
        requiresPin:
          type: boolean
        isContactless:
          type: boolean
        fulfilledBefore:
          type: string
          format: date-time
          nullable: true
        currentQuote:
          $ref: '#/components/schemas/QuoteData'
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    # Quote
    QuoteData:
      type: object
      properties:
        id:
          type: integer
        orderId:
          type: integer
        version:
          type: integer
        status:
          type: string
          enum: [pending, accepted, declined, expired, canceled]
        isFinal:
          type: boolean
        finalizedAt:
          type: string
          format: date-time
          nullable: true
        pickupProposedFor:
          type: string
          format: date-time
          nullable: true
        deliveryProposedFor:
          type: string
          format: date-time
          nullable: true
        validUntil:
          type: string
          format: date-time
          nullable: true
        currencyCode:
          type: string
        baseFare:
          type: string
          format: decimal
        distanceKm:
          type: string
          format: decimal
        distanceFee:
          type: string
          format: decimal
        timeFee:
          type: string
          format: decimal
        surcharge:
          type: string
          format: decimal
        discountRate:
          type: string
          format: decimal
        taxRate:
          type: string
          format: decimal
        taxTotal:
          type: string
          format: decimal
        total:
          type: string
          format: decimal

    # Business
    BusinessData:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        typeName:
          type: string
        usersCanApproveOwnOrders:
          type: boolean
        createdAt:
          type: string
          format: date-time

    # Driver
    DriverData:
      type: object
      properties:
        id:
          type: integer
        userId:
          type: integer
        licenseNumber:
          type: string
        licensePlateNumber:
          type: string
        licenseExpirationDate:
          type: string
          format: date

    # Catalog
    CatalogData:
      type: object
      properties:
        id:
          type: integer
        code:
          type: string
        name:
          type: string
        description:
          type: string
          nullable: true

    CatalogElementData:
      type: object
      properties:
        id:
          type: integer
        catalogId:
          type: integer
        code:
          type: string
        name:
          type: string
        description:
          type: string
          nullable: true

    # Request Bodies
    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
        password:
          type: string
        remember:
          type: boolean
          default: false

    RegisterClientRequest:
      type: object
      required:
        - name
        - email
        - password
        - phone
        - dateOfBirth
        - sexId
        - langCode
      properties:
        name:
          type: string
          minLength: 3
          maxLength: 255
        email:
          type: string
          format: email
        password:
          type: string
          minLength: 8
          maxLength: 24
          description: Must contain letters, mixed case, numbers, and symbols
        phone:
          type: string
          pattern: '^\+506\s\d{4}-\d{4}$'
          example: '+506 8888-8888'
        dateOfBirth:
          type: string
          format: date
        avatar:
          type: string
          format: uri
        sexId:
          type: integer
        langCode:
          type: string
          maxLength: 2

    StoreAddressRequest:
      type: object
      required:
        - latitude
        - longitude
        - label
      properties:
        latitude:
          type: number
          minimum: -90
          maximum: 90
        longitude:
          type: number
          minimum: -180
          maximum: 180
        label:
          type: string
          minLength: 2
          maxLength: 30
        placeId:
          type: string
          maxLength: 255
        additionalInfo:
          type: string
          maxLength: 255
        isPrimary:
          type: boolean
          default: false

    StoreSnapshotAddressRequest:
      type: object
      required:
        - latitude
        - longitude
      properties:
        latitude:
          type: number
          minimum: -90
          maximum: 90
        longitude:
          type: number
          minimum: -180
          maximum: 180
        placeId:
          type: string
        additionalInfo:
          type: string

    StoreOrderRequest:
      type: object
      required:
        - fromName
        - fromPhone
        - fromAddress
        - toName
        - toPhone
        - toAddress
        - currencyCode
      properties:
        fromName:
          type: string
        fromPhone:
          type: string
        fromAddress:
          $ref: '#/components/schemas/StoreSnapshotAddressRequest'
        toName:
          type: string
        toPhone:
          type: string
        toAddress:
          $ref: '#/components/schemas/StoreSnapshotAddressRequest'
        currencyCode:
          type: string
        description:
          type: string
        fulfilledBefore:
          type: string
          format: date-time
          description: 'Format: Y-m-d H:i:s (e.g., 2026-01-15 12:30:00)'
        requiresPin:
          type: boolean
          default: false
        isContactless:
          type: boolean
          default: false

    UpdatePasswordRequest:
      type: object
      required:
        - currentPassword
        - password
        - passwordConfirmation
      properties:
        currentPassword:
          type: string
        password:
          type: string
          minLength: 8
          maxLength: 24
        passwordConfirmation:
          type: string

paths:
  # Auth - Public
  /locale:
    get:
      tags: [Auth]
      summary: Get app locale
      operationId: getLocale
      responses:
        '200':
          description: Current locale
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      item:
                        type: string

  /auth/token:
    post:
      tags: [Auth]
      summary: Login for app users (mobile app)
      description: |
        Login endpoint for the mobile app (front-end). Only allows users with
        client, business.owner, or business.user roles.
      operationId: login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '201':
          description: Login successful
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      token:
                        type: string
        '403':
          description: Role not allowed for this endpoint
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Validation error (invalid credentials)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      tags: [Auth]
      summary: Logout (delete token)
      operationId: logout
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Logged out
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessBasic'

  /auth/admin/token:
    post:
      tags: [Auth]
      summary: Login for admin users (admin panel)
      description: |
        Login endpoint for the admin panel. Only allows users with the admin role.
      operationId: loginAdmin
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '201':
          description: Login successful
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      token:
                        type: string
        '403':
          description: Role not allowed for this endpoint
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Validation error (invalid credentials)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /auth/driver/token:
    post:
      tags: [Auth]
      summary: Login for driver users (driver app)
      description: |
        Login endpoint for the driver app. Only allows users with the driver role.
      operationId: loginDriver
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '201':
          description: Login successful
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      token:
                        type: string
        '403':
          description: Role not allowed for this endpoint
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Validation error (invalid credentials)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /auth/token/user:
    get:
      tags: [Auth]
      summary: Get authenticated user
      operationId: getAuthUser
      security:
        - bearerAuth: []
      responses:
        '200':
          description: User data
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      item:
                        $ref: '#/components/schemas/UserData'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /auth/password:
    patch:
      tags: [Auth]
      summary: Update password
      operationId: updatePassword
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePasswordRequest'
      responses:
        '200':
          description: Password updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessBasic'
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /auth/register/client:
    post:
      tags: [Auth]
      summary: Register as client
      operationId: registerClient
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterClientRequest'
      responses:
        '201':
          description: Registration successful
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      token:
                        type: string
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # Users
  /users:
    get:
      tags: [Users]
      summary: List users
      description: |
        List users with optional filtering. Admins can see all users and filter by role.
        Non-admins can only see clients. Supports search by name, email, or phone.
      operationId: listUsers
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: perPage
          in: query
          schema:
            type: integer
            default: 15
            minimum: 1
            maximum: 100
        - name: filter[role]
          in: query
          description: Filter by role (admin only). Non-admins always see only clients.
          schema:
            type: string
            enum: [admin, client, driver, business.owner, business.user]
        - name: search
          in: query
          description: Search by name, email, or phone (case-insensitive)
          schema:
            type: string
      responses:
        '200':
          description: Paginated users
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      items:
                        type: array
                        items:
                          $ref: '#/components/schemas/UserData'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'

  /users/{id}:
    get:
      tags: [Users]
      summary: Get user by ID
      operationId: getUser
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: User data
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      item:
                        $ref: '#/components/schemas/UserData'
    patch:
      tags: [Users]
      summary: Update user
      operationId: updateUser
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                email:
                  type: string
                phone:
                  type: string
                avatar:
                  type: string
                langCode:
                  type: string
                sexId:
                  type: integer
      responses:
        '200':
          description: User updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      item:
                        $ref: '#/components/schemas/UserData'
    delete:
      tags: [Users]
      summary: Delete user
      operationId: deleteUser
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: User deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessBasic'

  # Addresses
  /addresses:
    get:
      tags: [Addresses]
      summary: List user's addresses
      operationId: listAddresses
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: integer
        - name: perPage
          in: query
          schema:
            type: integer
      responses:
        '200':
          description: Paginated addresses
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      items:
                        type: array
                        items:
                          $ref: '#/components/schemas/AddressData'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
    post:
      tags: [Addresses]
      summary: Create address
      operationId: createAddress
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StoreAddressRequest'
      responses:
        '201':
          description: Address created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      item:
                        $ref: '#/components/schemas/AddressData'

  /addresses/{id}:
    get:
      tags: [Addresses]
      summary: Get address by ID
      operationId: getAddress
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Address data
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      item:
                        $ref: '#/components/schemas/AddressData'
    patch:
      tags: [Addresses]
      summary: Update address
      operationId: updateAddress
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StoreAddressRequest'
      responses:
        '200':
          description: Address updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      item:
                        $ref: '#/components/schemas/AddressData'
    delete:
      tags: [Addresses]
      summary: Delete address
      operationId: deleteAddress
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Address deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessBasic'

  # Orders
  /orders:
    get:
      tags: [Orders]
      summary: List orders
      operationId: listOrders
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: integer
        - name: perPage
          in: query
          schema:
            type: integer
      responses:
        '200':
          description: Paginated orders
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      items:
                        type: array
                        items:
                          $ref: '#/components/schemas/OrderData'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
    post:
      tags: [Orders]
      summary: Create order
      operationId: createOrder
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StoreOrderRequest'
      responses:
        '201':
          description: Order created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      item:
                        $ref: '#/components/schemas/OrderData'

  /orders/{id}:
    get:
      tags: [Orders]
      summary: Get order by ID
      operationId: getOrder
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Order data
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      item:
                        $ref: '#/components/schemas/OrderData'
    patch:
      tags: [Orders]
      summary: Update order
      operationId: updateOrder
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Order updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      item:
                        $ref: '#/components/schemas/OrderData'
    delete:
      tags: [Orders]
      summary: Delete order
      operationId: deleteOrder
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Order deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessBasic'

  /orders/{id}/approve:
    post:
      tags: [Orders]
      summary: Approve order quote
      operationId: approveOrder
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Order approved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      item:
                        $ref: '#/components/schemas/OrderData'

  /orders/{id}/deny:
    post:
      tags: [Orders]
      summary: Deny order quote
      operationId: denyOrder
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Order denied
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      item:
                        $ref: '#/components/schemas/OrderData'

  # Quotes
  /quotes:
    get:
      tags: [Quotes]
      summary: List quotes
      operationId: listQuotes
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Paginated quotes
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      items:
                        type: array
                        items:
                          $ref: '#/components/schemas/QuoteData'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
    post:
      tags: [Quotes]
      summary: Create quote (admin)
      operationId: createQuote
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - orderId
              properties:
                orderId:
                  type: integer
                baseFare:
                  type: string
                distanceKm:
                  type: string
                distanceFee:
                  type: string
                timeFee:
                  type: string
                surcharge:
                  type: string
                discountRate:
                  type: string
                taxRate:
                  type: string
                pickupProposedFor:
                  type: string
                  format: date-time
                deliveryProposedFor:
                  type: string
                  format: date-time
                validUntil:
                  type: string
                  format: date-time
      responses:
        '201':
          description: Quote created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      item:
                        $ref: '#/components/schemas/QuoteData'

  /quotes/{id}:
    get:
      tags: [Quotes]
      summary: Get quote by ID
      operationId: getQuote
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Quote data
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      item:
                        $ref: '#/components/schemas/QuoteData'

  /quotes/{id}/send:
    post:
      tags: [Quotes]
      summary: Send quote to client
      operationId: sendQuote
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Quote sent
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      item:
                        $ref: '#/components/schemas/QuoteData'

  # Geolocation
  /geo/reverse-geocode:
    get:
      tags: [Geolocation]
      summary: Reverse geocode coordinates
      operationId: reverseGeocode
      security:
        - bearerAuth: []
      parameters:
        - name: latitude
          in: query
          required: true
          schema:
            type: number
        - name: longitude
          in: query
          required: true
          schema:
            type: number
      responses:
        '200':
          description: Geocoding result
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      item:
                        type: object
                        properties:
                          formattedAddress:
                            type: string
                          placeId:
                            type: string
                          latitude:
                            type: number
                          longitude:
                            type: number

  /geo/places/autocomplete:
    get:
      tags: [Geolocation]
      summary: Place autocomplete
      operationId: autocomplete
      security:
        - bearerAuth: []
      parameters:
        - name: input
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Autocomplete results
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            placeId:
                              type: string
                            description:
                              type: string
                            mainText:
                              type: string
                            secondaryText:
                              type: string

  /geo/places/details/{placeId}:
    get:
      tags: [Geolocation]
      summary: Get place details
      operationId: placeDetails
      security:
        - bearerAuth: []
      parameters:
        - name: placeId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Place details
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      item:
                        type: object
                        properties:
                          placeId:
                            type: string
                          formattedAddress:
                            type: string
                          latitude:
                            type: number
                          longitude:
                            type: number

  # Catalogs
  /catalogs:
    get:
      tags: [Catalogs]
      summary: List catalogs
      operationId: listCatalogs
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Catalog list
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      items:
                        type: array
                        items:
                          $ref: '#/components/schemas/CatalogData'

  /catalogs/{code}/elements/translated:
    get:
      tags: [Catalogs]
      summary: Get catalog elements by code (translated)
      description: Returns translated catalog elements sorted by order (asc), then code (asc)
      operationId: getCatalogElementsTranslated
      parameters:
        - name: code
          in: path
          required: true
          schema:
            type: string
        - name: per_page
          in: query
          required: false
          schema:
            type: integer
            default: 15
            minimum: 1
            maximum: 100
      responses:
        '200':
          description: Catalog elements sorted by order, then code
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      items:
                        type: array
                        items:
                          $ref: '#/components/schemas/CatalogElementData'

  # Businesses
  /businesses:
    get:
      tags: [Businesses]
      summary: List businesses
      operationId: listBusinesses
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Business list
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      items:
                        type: array
                        items:
                          $ref: '#/components/schemas/BusinessData'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'

  /businesses/{id}:
    get:
      tags: [Businesses]
      summary: Get business by ID
      operationId: getBusiness
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Business data
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      item:
                        $ref: '#/components/schemas/BusinessData'

  # Drivers
  /drivers:
    get:
      tags: [Drivers]
      summary: List drivers
      operationId: listDrivers
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Driver list
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      items:
                        type: array
                        items:
                          $ref: '#/components/schemas/DriverData'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'

  /drivers/{id}:
    get:
      tags: [Drivers]
      summary: Get driver by ID
      operationId: getDriver
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Driver data
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessBasic'
                  - type: object
                    properties:
                      item:
                        $ref: '#/components/schemas/DriverData'
